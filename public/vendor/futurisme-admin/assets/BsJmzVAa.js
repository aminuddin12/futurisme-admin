import{X as e,r,G as s,j as a,S as t,I as l,m as o,b as i}from"./BiG0yOxZ.js";import{A as d}from"./Cyduc1NX.js";import{P as n,I as c,a as m}from"./BSCrMRmJ.js";import{T as x}from"./u6JewS2A.js";import{M as g}from"./Cn8GMEbk.js";import{s as p}from"./BvnFikG3.js";import"./C732sPEz.js";import"./C4ns6ZSC.js";import"./B2aiWnG6.js";import"./BllKJuBp.js";function y({roles:y,permissions:u,filters:h}){var b;const{config:j}=e().props,f=(null==j?void 0:j.admin_url_prefix)||"admin",N=null==(b=null==j?void 0:j.theme)?void 0:b.color_primary,v="default"!==N&&N?N:"#4f46e5",[k,w]=r.useState("roles"),[S,C]=r.useState(h.search||""),[_,$]=r.useState(!1),[D,A]=r.useState("create"),[P,R]=r.useState(null),{data:E,setData:F,post:G,put:I,delete:M,processing:O,errors:q,reset:L,clearErrors:T}=s({name:"",guard_name:"web"});return a.jsxs(d,{header:"Role & Permission Management",children:[a.jsx(t,{title:"Roles & Permissions"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-900 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>w("roles"),className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 "+("roles"===k?"bg-white dark:bg-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),style:"roles"===k?{color:v}:{},children:"Roles"}),a.jsx("button",{onClick:()=>w("permissions"),className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 "+("permissions"===k?"bg-white dark:bg-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),style:"permissions"===k?{color:v}:{},children:"Permissions"})]}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsxs("form",{onSubmit:e=>{e.preventDefault(),i.get(p("futurisme.roles.index",`/${f}/roles`),{search:S},{preserveState:!0})},className:"relative flex-1 md:flex-none",children:[a.jsx(l,{icon:"solar:magnifer-linear",className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",width:"20"}),a.jsx("input",{type:"text",placeholder:`Search ${k}...`,value:S,onChange:e=>C(e.target.value),className:"w-full md:w-64 pl-10 pr-4 py-2.5 text-sm bg-gray-50 dark:bg-gray-900 border-none rounded-xl focus:ring-2 focus:ring-opacity-20 transition-all outline-none",style:{"--tw-ring-color":v}})]}),a.jsxs(n,{onClick:()=>{A("create"),R(null),L(),T(),$(!0)},className:"py-2.5 px-4 rounded-xl flex items-center gap-2 shadow-lg hover:shadow-xl transition-all",style:{backgroundColor:v},children:[a.jsx(l,{icon:"solar:add-circle-bold",width:"20"}),a.jsx("span",{className:"hidden sm:inline",children:"Add New"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden shadow-sm",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-700/30 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"#"}),a.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"Name"}),a.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"Guard"}),"roles"===k&&a.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300 text-center",children:"Permissions"}),a.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"Created At"}),a.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300 text-right",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[("roles"===k?y.data:u.data).map((e,r)=>a.jsxs(o.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*r},className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400 w-12",children:r+1}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:e.guard_name})}),"roles"===k&&a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",children:e.permissions_count||0})}),a.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400 whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>(e=>{A("edit"),R(e),F({name:e.name,guard_name:e.guard_name}),T(),$(!0)})(e),className:"p-2 rounded-lg text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",title:"Edit",children:a.jsx(l,{icon:"solar:pen-new-square-linear",width:"18"})}),a.jsx("button",{onClick:()=>(e=>{if(!confirm("Are you sure you want to delete this item?"))return;const r="roles"===k;M(p(r?"futurisme.roles.destroy":"futurisme.permissions.destroy",r?`/${f}/roles/${e}`:`/${f}/permissions/${e}/destroy`),{preserveScroll:!0})})(e.id),className:"p-2 rounded-lg text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-colors",title:"Delete",children:a.jsx(l,{icon:"solar:trash-bin-trash-linear",width:"18"})})]})})]},e.id)),0===("roles"===k?y.data:u.data).length&&a.jsx("tr",{children:a.jsx("td",{colSpan:"roles"===k?6:5,className:"px-6 py-12 text-center text-gray-400 dark:text-gray-500",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(l,{icon:"solar:box-minimalistic-linear",width:"48",className:"opacity-50"}),a.jsxs("p",{children:["No ",k," found"]})]})})})]})]})}),a.jsx("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:a.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing data ",k," page 1"]})})]})]}),a.jsx(g,{isOpen:_,onClose:()=>$(!1),title:`${"create"===D?"Create New":"Edit"} ${"roles"===k?"Role":"Permission"}`,children:a.jsxs("form",{onSubmit:e=>{e.preventDefault();const r="roles"===k;if("create"===D)G(p(r?"futurisme.roles.store":"futurisme.permissions.store",r?`/${f}/roles`:`/${f}/permissions/store`),{onSuccess:()=>$(!1)});else{const e=r?"futurisme.roles.update":"futurisme.permissions.update",s=r?`/${f}/roles/${null==P?void 0:P.id}`:`/${f}/permissions/${null==P?void 0:P.id}/update`;I(p(e,s),{onSuccess:()=>$(!1)})}},className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx(c,{htmlFor:"name",value:"Name"}),a.jsx(x,{id:"name",type:"text",value:E.name,onChange:e=>F("name",e.target.value),className:"mt-1 block w-full",placeholder:"roles"===k?"e.g. Super Admin":"e.g. edit_posts",isFocused:!0}),a.jsx(m,{message:q.name,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(c,{htmlFor:"guard_name",value:"Guard Name"}),a.jsx(x,{id:"guard_name",type:"text",value:E.guard_name,onChange:e=>F("guard_name",e.target.value),className:"mt-1 block w-full bg-gray-100 dark:bg-gray-700 text-gray-500 cursor-not-allowed",readOnly:!0}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Default guard is 'web'."}),a.jsx(m,{message:q.guard_name,className:"mt-2"})]}),a.jsxs("div",{className:"flex justify-end pt-4 gap-3",children:[a.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx(n,{className:"px-6 py-2 rounded-xl shadow-lg",style:{backgroundColor:v},disabled:O,children:O?"Saving...":"Save Changes"})]})]})})]})}export{y as default};
