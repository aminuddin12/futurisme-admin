import{r as e,j as a,I as s,A as r,m as t}from"./BiG0yOxZ.js";function d({data:d}){const[l,i]=e.useState(null),c=({title:e,value:r,icon:t,color:d})=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:`p-3 rounded-lg ${d}`,children:a.jsx(s,{icon:t,className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("span",{className:"block text-2xl font-bold text-gray-900 dark:text-white",children:r}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:e})]})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(c,{title:"Total Visits",value:d.stats.total,icon:"lucide:globe",color:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}),a.jsx(c,{title:"Unique Visitors",value:d.stats.unique,icon:"lucide:fingerprint",color:"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400"}),a.jsx(c,{title:"Authenticated",value:d.stats.auth,icon:"lucide:user-check",color:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}),a.jsx(c,{title:"Guests",value:d.stats.guest,icon:"lucide:users",color:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:a.jsx("h3",{className:"text-sm font-bold text-gray-800 dark:text-white uppercase tracking-wider",children:"Live Traffic Feed"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[a.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 w-10"}),a.jsx("th",{className:"px-6 py-3",children:"Time"}),a.jsx("th",{className:"px-6 py-3",children:"Visitor"}),a.jsx("th",{className:"px-6 py-3",children:"Page"}),a.jsx("th",{className:"px-6 py-3",children:"Device"}),a.jsx("th",{className:"px-6 py-3",children:"IP Address"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.visits.data.length>0?d.visits.data.map(e=>{var d,c;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{onClick:()=>{return a=e.id,void i(l===a?null:a);var a},className:`\n                                                cursor-pointer transition-colors\n                                                ${l===e.id?"bg-indigo-50 dark:bg-indigo-900/20":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50"}\n                                            `,children:[a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx(s,{icon:"lucide:chevron-right",className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(l===e.id?"rotate-90 text-indigo-500":"")})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500 font-mono text-xs",children:new Date(e.created_at).toLocaleString()}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center gap-2",children:e.user_id?a.jsxs("span",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded text-xs font-bold",children:[a.jsx(s,{icon:"lucide:user-check",className:"w-3 h-3"}),(null==(d=e.admin)?void 0:d.name)||(null==(c=e.user)?void 0:c.name)||"Auth User"]}):a.jsxs("span",{className:"flex items-center gap-1 text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-xs font-bold",children:[a.jsx(s,{icon:"lucide:ghost",className:"w-3 h-3"}),"Guest"]})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-col max-w-xs",children:a.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",title:e.url,children:e.url.replace(/^.*\/\/[^\/]+/,"")})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-col text-xs text-gray-500",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(s,{icon:"Mobile"===e.device?"lucide:smartphone":"lucide:monitor",className:"w-3 h-3"}),e.device]})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-col text-xs",children:a.jsx("span",{className:"font-mono text-gray-600 dark:text-gray-300",children:e.ip_address})})})]},e.id),a.jsx(r,{children:l===e.id&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"p-0 border-none",children:a.jsx(t.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700 shadow-inner",children:a.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-sm",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(s,{icon:"lucide:monitor",className:"w-4 h-4"})," Device Info"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Browser:"}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:e.browser}),a.jsx("span",{className:"text-gray-500",children:"Platform:"}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:e.platform}),a.jsx("span",{className:"text-gray-500",children:"User Agent:"}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",title:e.user_agent,children:e.user_agent})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(s,{icon:"lucide:link",className:"w-4 h-4"})," Navigation"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block",children:"Full URL:"}),a.jsx("a",{href:e.url,target:"_blank",className:"font-medium text-indigo-600 hover:underline truncate block w-full",children:e.url})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block",children:"Referrer:"}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 truncate block w-full",children:e.referer||"Direct Access"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block",children:"Method:"}),a.jsx("span",{className:"font-mono font-bold text-gray-700 dark:text-gray-300",children:e.method})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(s,{icon:"lucide:cookie",className:"w-4 h-4"})," Cookie Data"]}),e.cookies?a.jsx("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 font-mono text-[10px] text-gray-600 dark:text-gray-400 overflow-x-auto max-h-32",children:a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsx("span",{children:"Screen:"})," ",a.jsxs("span",{children:[e.cookies.screen_width,"x",e.cookies.screen_height]}),a.jsx("span",{children:"Timezone:"})," ",a.jsx("span",{children:e.cookies.timezone}),a.jsx("span",{children:"Lang:"})," ",a.jsx("span",{children:e.cookies.language}),a.jsx("span",{children:"Conn:"})," ",a.jsx("span",{children:e.cookies.connection})]})}):a.jsx("span",{className:"text-xs text-gray-400 italic",children:"No detailed cookie data captured."})]})]})})})})})]})}):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No traffic recorded yet."})})})]})})]})]})}export{d as default};
