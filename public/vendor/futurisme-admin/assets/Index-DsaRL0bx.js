import{r as m,j as e,X,G as H,S as J,A as Q}from"./app-BnUauVEn.js";import{I as g}from"./iconify-DDbmfzMh.js";import{A as U}from"./AuthenticatedLayout-DSBTC3eT.js";import{P as E,I as P,T as D,a as M}from"./TextInput-BzdTM6a_.js";import{A as V,s as u}from"./routeHelper-2hwUHslw.js";import{m as f}from"./proxy-Dnv_11yw.js";import"./app-D7pzM239.js";import"./ThemeToggle-D9KEYVz3.js";import"./FlashMessage-DXe00YoP.js";function W({isOpen:d,onClose:l,title:h,children:o,maxWidth:t="max-w-lg"}){return m.useEffect(()=>{const i=n=>{n.key==="Escape"&&l()};return d&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[d,l]),e.jsx(V,{children:d&&e.jsxs(e.Fragment,{children:[e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[60] transition-opacity"}),e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 overflow-y-auto pointer-events-none",children:e.jsxs(f.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",stiffness:300,damping:30},className:`w-full ${t} bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 pointer-events-auto overflow-hidden`,children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:h}),e.jsx("button",{onClick:l,className:"p-1 rounded-lg text-gray-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-colors",children:e.jsx(g,{icon:"solar:close-circle-bold",className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:o})]})})]})})}function ne({roles:d,permissions:l,filters:h}){var A;const{config:o}=X().props,t=(o==null?void 0:o.admin_url_prefix)||"admin",i=(A=o==null?void 0:o.theme)==null?void 0:A.color_primary,n=i==="default"||!i?"#4f46e5":i,[a,j]=m.useState("roles"),[N,R]=m.useState(h.search||""),[I,c]=m.useState(!1),[v,k]=m.useState("create"),[x,w]=m.useState(null),{data:S,setData:b,post:T,put:L,delete:F,processing:C,errors:$,reset:G,clearErrors:_}=H({name:"",guard_name:"web"}),z=r=>{r.preventDefault(),Q.get(u("futurisme.roles.index",`/${t}/roles`),{search:N},{preserveState:!0})},O=()=>{k("create"),w(null),G(),_(),c(!0)},q=r=>{k("edit"),w(r),b({name:r.name,guard_name:r.guard_name}),_(),c(!0)},B=r=>{r.preventDefault();const s=a==="roles";if(v==="create"){const y=s?"futurisme.roles.store":"futurisme.permissions.store",p=s?`/${t}/roles`:`/${t}/permissions/store`;T(u(y,p),{onSuccess:()=>c(!1)})}else{const y=s?"futurisme.roles.update":"futurisme.permissions.update",p=s?`/${t}/roles/${x==null?void 0:x.id}`:`/${t}/permissions/${x==null?void 0:x.id}/update`;L(u(y,p),{onSuccess:()=>c(!1)})}},K=r=>{if(!confirm("Are you sure you want to delete this item?"))return;const s=a==="roles",y=s?"futurisme.roles.destroy":"futurisme.permissions.destroy",p=s?`/${t}/roles/${r}`:`/${t}/permissions/${r}/destroy`;F(u(y,p),{preserveScroll:!0})};return e.jsxs(U,{header:"Role & Permission Management",children:[e.jsx(J,{title:"Roles & Permissions"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-900 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>j("roles"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${a==="roles"?"bg-white dark:bg-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,style:a==="roles"?{color:n}:{},children:"Roles"}),e.jsx("button",{onClick:()=>j("permissions"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${a==="permissions"?"bg-white dark:bg-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,style:a==="permissions"?{color:n}:{},children:"Permissions"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("form",{onSubmit:z,className:"relative flex-1 md:flex-none",children:[e.jsx(g,{icon:"solar:magnifer-linear",className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",width:"20"}),e.jsx("input",{type:"text",placeholder:`Search ${a}...`,value:N,onChange:r=>R(r.target.value),className:"w-full md:w-64 pl-10 pr-4 py-2.5 text-sm bg-gray-50 dark:bg-gray-900 border-none rounded-xl focus:ring-2 focus:ring-opacity-20 transition-all outline-none",style:{"--tw-ring-color":n}})]}),e.jsxs(E,{onClick:O,className:"py-2.5 px-4 rounded-xl flex items-center gap-2 shadow-lg hover:shadow-xl transition-all",style:{backgroundColor:n},children:[e.jsx(g,{icon:"solar:add-circle-bold",width:"20"}),e.jsx("span",{className:"hidden sm:inline",children:"Add New"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-700/30 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"#"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"Name"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"Guard"}),a==="roles"&&e.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300 text-center",children:"Permissions"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300",children:"Created At"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 dark:text-gray-300 text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[(a==="roles"?d.data:l.data).map((r,s)=>e.jsxs(f.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:s*.05},className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400 w-12",children:s+1}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:r.guard_name})}),a==="roles"&&e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",children:r.permissions_count||0})}),e.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400 whitespace-nowrap",children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>q(r),className:"p-2 rounded-lg text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",title:"Edit",children:e.jsx(g,{icon:"solar:pen-new-square-linear",width:"18"})}),e.jsx("button",{onClick:()=>K(r.id),className:"p-2 rounded-lg text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-colors",title:"Delete",children:e.jsx(g,{icon:"solar:trash-bin-trash-linear",width:"18"})})]})})]},r.id)),(a==="roles"?d.data:l.data).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:a==="roles"?6:5,className:"px-6 py-12 text-center text-gray-400 dark:text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(g,{icon:"solar:box-minimalistic-linear",width:"48",className:"opacity-50"}),e.jsxs("p",{children:["No ",a," found"]})]})})})]})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing data ",a," page 1"]})})]})]}),e.jsx(W,{isOpen:I,onClose:()=>c(!1),title:`${v==="create"?"Create New":"Edit"} ${a==="roles"?"Role":"Permission"}`,children:e.jsxs("form",{onSubmit:B,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"name",value:"Name"}),e.jsx(D,{id:"name",type:"text",value:S.name,onChange:r=>b("name",r.target.value),className:"mt-1 block w-full",placeholder:a==="roles"?"e.g. Super Admin":"e.g. edit_posts",isFocused:!0}),e.jsx(M,{message:$.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"guard_name",value:"Guard Name"}),e.jsx(D,{id:"guard_name",type:"text",value:S.guard_name,onChange:r=>b("guard_name",r.target.value),className:"mt-1 block w-full bg-gray-100 dark:bg-gray-700 text-gray-500 cursor-not-allowed",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Default guard is 'web'."}),e.jsx(M,{message:$.guard_name,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end pt-4 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx(E,{className:"px-6 py-2 rounded-xl shadow-lg",style:{backgroundColor:n},disabled:C,children:C?"Saving...":"Save Changes"})]})]})})]})}export{ne as default};
